---
import type { Recipe } from '../../../types/Recipe'
import { formatCookTime } from '../../../utils/formatCookTime'
import Heading from '../../Heading.astro'

interface Props {
  data: Recipe
}

const { data } = Astro.props

const formattedCooktime = formatCookTime(data.timeToCook)
---

<section class="relative">
  <!-- Background image -->
  {data.mainImageUrl
    ? (
      <img
        class="bg-primary-500 absolute inset-0 z-0 h-[50vh] w-full rounded-b-3xl object-cover md:h-[80vh]"
        src={data.mainImageUrl}
        alt={data.name}
      />
    )
    : (
      <div class="bg-primary-500 absolute inset-0 z-0 h-[50vh] w-full rounded-b-3xl md:h-[80vh]" />
    )}

  <!-- Content -->
  <div class="container relative z-10 mx-auto">
    <div class="flex h-screen items-center justify-center md:items-end md:pb-12">
      <div class="rounded-4xl flex w-full flex-col items-center justify-center gap-y-2 bg-white px-5 py-6 shadow-xl md:max-w-4xl md:gap-y-4 md:px-12 md:py-10">
        <!-- Categories -->
        {data.categories && data.categories.length > 0 && (
          <div class="hidden gap-2 md:flex">
            {data.categories.map(category => (
              <span class="bg-primary-100 text-primary-700 rounded-full px-4 py-1 text-sm font-medium">
                {category.name}
              </span>
            ))}
          </div>
        )}

        <!-- Title -->
        <Heading
          size="display-xl"
          as="h1"
          class="text-primary-900 md:text-display-3xl text-center"
        >
          {data.name}
        </Heading>

        <!-- Description (Desktop only) -->
        {data.description && (
          <p class="text-body-lg hidden text-center text-gray-600 md:block md:max-w-2xl">
            {data.description}
          </p>
        )}

        <!-- Ingredients count -->
        <p class="text-body-md md:text-body-lg text-gray-400">
          {data.ingredients?.length} ingrediÃ«nten
        </p>

        <!-- Stats -->
        <ul class="text-primary-900 md:text-body-lg mt-4 flex w-full items-center justify-evenly md:mt-6 md:gap-8">
          <li class="flex flex-col items-center gap-y-1 md:flex-row md:gap-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="text-primary-600 size-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>{formattedCooktime}</span>
          </li>
          <li class="flex flex-col items-center gap-y-1 md:flex-row md:gap-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="text-primary-600 size-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            <span>{data.servings} {data.servingsType || 'porties'}</span>
          </li>
          <li class="flex flex-col items-center gap-y-1 md:flex-row md:gap-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="text-primary-600 size-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
            </svg>
            <span>{data.rating} sterren</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

---
// TODO: Add Truncate system for when there's a lot of labels in a row

interface Props {
  color?: 'primary' | 'secondary'
  slug?: string
  size?: 'sm' | 'md' | 'lg'
}

const { color = 'primary', slug, size = 'md' } = Astro.props

const sizeClasses = {
  sm: 'text-xs',
  md: 'text-sm',
  lg: 'text-md',
}

const paddingClasses = {
  sm: 'px-2',
  md: 'px-2 py-0.5',
  lg: 'px-3 py-1',
}
---

{slug
? (
  <span
    role="button"
    tabindex="0"
    class:list={[
      'relative z-10 inline-block cursor-pointer rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2',
      color === 'primary' ? 'focus:ring-primary-500' : 'focus:ring-secondary-500',
    ]}
    data-href={`/categorieen/${slug}`}
  >
    <div class:list={[
      'rounded-full text-white w-fit',
      paddingClasses[size],
      color === 'primary' ? 'bg-primary-50 hover:bg-primary-100 hover:text-primary-800' : 'bg-secondary-50 hover:bg-secondary-100 hover:text-secondary-800',
      'transition-all duration-300 group',
    ]}
    >
      <span class:list={[
        color === 'primary' ? 'text-primary-800 group-hover:text-primary-700' : 'text-secondary-800 group-hover:text-secondary-700',
        sizeClasses[size],
      ]}
      >
        <slot />
      </span>
    </div>
  </span>
)
: (
  <div class:list={[
    'rounded-full text-white w-fit',
    paddingClasses[size],
    color === 'primary' ? 'bg-primary-50' : 'bg-secondary-50',
  ]}
  >
    <span class:list={[
      color === 'primary' ? 'text-primary-800' : 'text-secondary-800',
      sizeClasses[size],
    ]}
    >
      <slot />
    </span>
  </div>
)}

<script>
document.addEventListener('DOMContentLoaded', () => {
  const labels = document.querySelectorAll('.interactive-label')

  labels.forEach((label) => {
    const href = label.getAttribute('data-href')
    if (!href)
      return

    // Handle click
    label.addEventListener('click', (e) => {
      e.stopPropagation()
      e.preventDefault()
      window.location.href = href
    })

    // Handle keyboard (Enter and Space)
    label.addEventListener('keydown', (e) => {
      if ((e as KeyboardEvent).key === 'Enter' || (e as KeyboardEvent).key === ' ') {
        e.stopPropagation()
        e.preventDefault()
        window.location.href = href
      }
    })
  })
})
</script>
